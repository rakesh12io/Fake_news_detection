<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fake News Detector</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #4b6f86; /* Dark background color */
      background-image: url('static/images/img10.jpg');
      background-size: cover; /* Ensures the image covers the entire page */
      background-position: center center; /* Centers the background image */
      background-attachment: fixed; /* Keeps the background fixed while scrolling */
    }

    /* Carousel animation */
    @keyframes scrollCarousel {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    #topCarousel {
      display: flex;
      animation: scrollCarousel 30s linear infinite;
      width: max-content;
    }

    #topCarousel img {
      width: 300px;
      height: 288px;
      object-fit: cover;
      border-radius: 12px;
      margin-right: 10px;
    }

    .loader {
      border: 4px solid rgba(0, 255, 255, 0.2);
      border-top: 4px solid #22d3ee;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      animation: spin 1s linear infinite;
      margin: auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="relative text-white min-h-screen bg-black">

  <!-- Carousel -->
  <div class="relative w-full h-72 overflow-hidden shadow-md z-10">
    <div id="topCarousel" class="absolute flex h-full">
      <img src="/static/images/img1.jpg" class="h-72 object-cover rounded-lg mx-2" alt="Slide 1">
      <img src="/static/images/img2.jpg" class="h-72 object-cover rounded-lg mx-2" alt="Slide 2">
      <img src="/static/images/img3.jpg" class="h-72 object-cover rounded-lg mx-2" alt="Slide 3">
      <img src="/static/images/img4.jpg" class="h-72 object-cover rounded-lg mx-2" alt="Slide 4">
      <img src="/static/images/img5.jpg" class="h-72 object-cover rounded-lg mx-2" alt="Slide 5">
      <img src="/static/images/img6.jpg" class="h-72 object-cover rounded-lg mx-2" alt="Slide 6">
      <img src="/static/images/img7.jpg" class="h-72 object-cover rounded-lg mx-2" alt="Slide 7">
    </div>
  </div>

  <!-- Navbar -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-black bg-opacity-70 px-6 py-4 shadow-md flex justify-between items-center">
    <div class="text-xl font-bold text-cyan-400">üì∞ NewsGuard</div>
    <ul class="flex space-x-6 text-sm">
        <ul class="flex space-x-6 text-sm">
            <li><a href="/" class="hover:text-cyan-400">Home</a></li>
            <li><a href="/admin" class="hover:text-cyan-400">Admin Panel</a></li>
            <li><a href="/login" class="hover:text-cyan-400">Login</a></li>
            <li><a href="/signup" class="hover:text-cyan-400">Signup</a></li> <!-- This is new -->
          </ul>
          <!-- <a href="/login" class="hover:text-cyan-400">Login</a></li> -->
    </ul>
  </nav>

  <!-- Main Content -->
  <main class="main-content pt-24 px-6 flex flex-col items-center gap-16">
    
    <!-- Fake News Detection -->
    <div class="w-full max-w-2xl bg-black bg-opacity-60 backdrop-blur p-8 rounded-lg shadow-md">
      <h1 class="text-3xl font-bold text-cyan-300 mb-2">Fake News Detector</h1>
      <p class="mb-4 text-gray-300">Paste a news article below to check if it's Real or Fake.</p>
      <form id="newsForm" class="flex flex-col gap-4">
        <textarea id="newsText" rows="6" class="p-4 rounded-md bg-gray-800 border border-cyan-400" placeholder="Paste your news article here..."></textarea>
        <button type="submit" class="bg-cyan-500 hover:bg-cyan-600 transition px-6 py-2 rounded-md text-white font-semibold">Analyze</button>
      </form>
      <div id="resultCard" class="hidden mt-6 p-4 rounded-lg bg-gray-800 border border-cyan-400">
        <h3 class="text-xl font-semibold text-cyan-300">üß† Result</h3>
        <p id="resultText" class="mt-4 text-white"></p>
      </div>
    </div>

    <!-- Feedback -->
    <div class="w-full max-w-2xl bg-black bg-opacity-60 backdrop-blur p-8 rounded-lg shadow-md">
      <h2 class="text-2xl font-bold text-cyan-300 mb-4">üí¨ Submit Feedback</h2>
      <form id="feedbackForm" class="flex flex-col gap-4">
        <input type="text" id="userName" class="p-3 rounded-md bg-gray-800 border border-cyan-400" placeholder="Your Name (optional)" />
        <textarea id="userFeedback" rows="4" class="p-3 rounded-md bg-gray-800 border border-cyan-400" placeholder="Write your feedback..."></textarea>
        <button type="submit" class="bg-cyan-500 hover:bg-cyan-600 transition px-6 py-2 rounded-md text-white font-semibold">Submit Feedback</button>
      </form>
      <p id="feedbackMsg" class="mt-3 text-green-300 font-medium"></p>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-900 text-gray-300 py-6 px-4 mt-10">
    <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
      <div class="text-center md:text-left">
        <p class="text-sm">&copy; 2025 NewsGuard. All rights reserved.</p>
      </div>
      <div class="flex space-x-6 text-xl">
        <a href="https://facebook.com" target="_blank" class="hover:text-blue-500"><i class="fab fa-facebook-f"></i></a>
        <a href="https://twitter.com" target="_blank" class="hover:text-cyan-400"><i class="fab fa-twitter"></i></a>
        <a href="https://instagram.com" target="_blank" class="hover:text-pink-500"><i class="fab fa-instagram"></i></a>
        <a href="https://github.com" target="_blank" class="hover:text-white"><i class="fab fa-github"></i></a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // üß† Prediction logic with loading spinner
    const form = document.getElementById('newsForm');
    const resultCard = document.getElementById('resultCard');
    const resultText = document.getElementById('resultText');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      resultCard.classList.remove('hidden');
      resultText.innerHTML = '<div class="loader"></div>';

      const text = document.getElementById('newsText').value;
      try {
        const res = await fetch('/predict', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text })
        });
        if (!res.ok) throw new Error('Prediction service error');
        const data = await res.json();
        resultText.innerHTML = `üß† Prediction: ${data.prediction}`;
      } catch (error) {
        resultText.innerHTML = '‚ùå Error: Could not fetch prediction. Please try again later.';
      }
    });

    // üí¨ Feedback logic
    const feedbackForm = document.getElementById('feedbackForm');
    feedbackForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('userName').value;
      const feedback = document.getElementById('userFeedback').value;

      try {
        const res = await fetch('/submit-feedback', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, feedback })
        });
        if (!res.ok) throw new Error('Feedback submission error');
        const data = await res.json();
        document.getElementById('feedbackMsg').innerText = data.message;
        feedbackForm.reset();
      } catch (error) {
        document.getElementById('feedbackMsg').innerText = '‚ùå Error: Could not submit feedback. Please try again later.';
      }
    });
  </script>

  <script>
  const slides = document.querySelectorAll(".carousel-slide");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  let current = 0;

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.remove("active");
      if (i === index) {
        slide.classList.add("active");
      }
    });
  }

  showSlide(current);

  prevBtn.addEventListener("click", () => {
    current = (current - 1 + slides.length) % slides.length;
    showSlide(current);
  });

  nextBtn.addEventListener("click", () => {
    current = (current + 1) % slides.length;
    showSlide(current);
  });

  // Optional: Mobile Swipe Support
  let startX = 0;
  document.getElementById("carouselImages").addEventListener("touchstart", e => {
    startX = e.touches[0].clientX;
  });

  document.getElementById("carouselImages").addEventListener("touchend", e => {
    let endX = e.changedTouches[0].clientX;
    if (startX - endX > 50) nextBtn.click();
    if (endX - startX > 50) prevBtn.click();
  });
</script>

</body>
</html>
